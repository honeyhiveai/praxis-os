
### Uh oh!

There was an error while loading. Please reload this page.

[![@dcbartlett](https://avatars.githubusercontent.com/u/1077050?s=40&u=6e63d955a89098e236a30ea67aab8e2277a40a81&v=4)](/dcbartlett) [dcbartlett](/dcbartlett) [force-pushed](/cline/cline/compare/cc68ff043e158eef13f2aae368c53c3cc947df99..988b65f1adcb28ae5d164973451b857668bfb1ff) the main branch from [`cc68ff0`](/cline/cline/commit/cc68ff043e158eef13f2aae368c53c3cc947df99) to [`988b65f`](/cline/cline/commit/988b65f1adcb28ae5d164973451b857668bfb1ff) [Compare](/cline/cline/compare/cc68ff043e158eef13f2aae368c53c3cc947df99..988b65f1adcb28ae5d164973451b857668bfb1ff) [July 9, 2025 01:41](#event-18536430864)

 

[Sign up for free](/join?source=comment-repo) **to join this conversation on GitHub**. Already have an account? [Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fcline%2Fcline%2Fpull%2F2991)

 

### Reviewers

 [![@ellipsis-dev](https://avatars.githubusercontent.com/in/64358?s=40&v=4)](/apps/ellipsis-dev)[ellipsis-dev\[bot\]](/apps/ellipsis-dev) [](/cline/cline/pull/2991/files/907a43ebfd82fdf68bd9d27b954d6120257f1a14)ellipsis-dev\[bot\] left review comments

 [![@saoudrizwan](https://avatars.githubusercontent.com/u/7799382?s=40&v=4)](/saoudrizwan)[saoudrizwan](/saoudrizwan) Awaiting requested review from saoudrizwan

 [![@ocasta181](https://avatars.githubusercontent.com/u/2112873?s=40&v=4)](/ocasta181)[ocasta181](/ocasta181) Awaiting requested review from ocasta181

 [![@NightTrek](https://avatars.githubusercontent.com/u/35793213?s=40&v=4)](/NightTrek)[NightTrek](/NightTrek) Awaiting requested review from NightTrek

 [![@pashpashpash](https://avatars.githubusercontent.com/u/20898225?s=40&v=4)](/pashpashpash)[pashpashpash](/pashpashpash) Awaiting requested review from pashpashpash

 [![@dcbartlett](https://avatars.githubusercontent.com/u/1077050?s=40&v=4)](/dcbartlett)[dcbartlett](/dcbartlett) Awaiting requested review from dcbartlett

 [![@saito-sv](https://avatars.githubusercontent.com/u/7920256?s=40&v=4)](/saito-sv)[saito-sv](/saito-sv) Awaiting requested review from saito-sv

 [![@Garoth](https://avatars.githubusercontent.com/u/206184?s=40&v=4)](/Garoth)[Garoth](/Garoth) Awaiting requested review from Garoth

At least 1 approving review is required to merge this pull request.

### Assignees

No one assigned

### Labels

None yet

### Projects

None yet

### Milestone

No milestone

### Development

Successfully merging this pull request may close these issues.

None yet

### 3 participants

 [![@narunbabu](https://avatars.githubusercontent.com/u/18241463?s=52&v=4)](/narunbabu)[![@andrew-martin-ck](https://avatars.githubusercontent.com/u/51206931?s=52&v=4) ](/andrew-martin-ck)[![@saoudrizwan](https://avatars.githubusercontent.com/u/7799382?s=52&v=4)](/saoudrizwan)

Add this suggestion to a batch that can be applied as a single commit. This suggestion is invalid because no changes were made to the code. Suggestions cannot be applied while the pull request is closed. Suggestions cannot be applied while viewing a subset of changes. Only one suggestion per line can be applied in a batch. Add this suggestion to a batch that can be applied as a single commit. Applying suggestions on deleted lines is not supported. You must change the existing code in this line in order to create a valid suggestion. Outdated suggestions cannot be applied. This suggestion has been applied or marked resolved. Suggestions cannot be applied from pending reviews. Suggestions cannot be applied on multi-line comments. Suggestions cannot be applied while the pull request is queued to merge. Suggestion cannot be applied right now. Please check back later.

You can’t perform that action at this time.
<environment_details>
# Cursor Visible Files
../../../../Library/Application Support/Cursor/User/globalStorage/saoudrizwan.claude-dev/settings/cline_mcp_settings.json

# Cursor Open Tabs
../../../../Library/Application Support/Cursor/User/globalStorage/saoudrizwan.claude-dev/settings/cline_mcp_settings.json

# Current Time
10/10/2025, 10:07:54 PM (America/Los_Angeles, UTC-7:00)

# Context Window Usage
59,729 / 200K tokens used (30%)

# Current Mode
ACT MODE
</environment_details>

---

**Assistant:**

[Unexpected content type]

<web_fetch>
<url>https://github.com/cline/cline/issues/5760</url>
<task_progress>
- [x] Found PR #2991 fixing ${workspaceFolder} support (open since April 2025)
- [ ] Check related issue about project-specific .env files
- [ ] Understand scope of the problem
- [ ] Provide comprehensive findings
</task_progress>
</web_fetch>

---

**User:**

[web_fetch for 'https://github.com/cline/cline/issues/5760'] Result:
Fetched Markdown for https://github.com/cline/cline/issues/5760:

                  Local MCP servers unable to load project-specific .env files · Issue #5760 · cline/cline                                             

[Skip to content](#start-of-content) 

You signed in with another tab or window. Reload to refresh your session. You signed out in another tab or window. Reload to refresh your session. You switched accounts on another tab or window. Reload to refresh your session. Dismiss alert

[cline](/cline) / **[cline](/cline/cline)** Public

*   [Notifications](/login?return_to=%2Fcline%2Fcline) You must be signed in to change notification settings
*   [Fork 7.3k](/login?return_to=%2Fcline%2Fcline)
*   [Star 51.2k](/login?return_to=%2Fcline%2Fcline)
    

This issue has been moved to a discussion[Go to the discussion](https://github.com/cline/cline/discussions/5820)

Local MCP servers unable to load project-specific .env files #5760
==================================================================

[New issue](/login?return_to=https://github.com/cline/cline/issues/5760)

Copy link

[New issue](/login?return_to=https://github.com/cline/cline/issues/5760)

Copy link

Closed

Closed

[Local MCP servers unable to load project-specific .env files](#top)#5760

Copy link

Assignees

[![arafatkatze](https://avatars.githubusercontent.com/u/11155207?s=64&u=cd4d7ee51cdd943f2bc1445788062f25a8dd3dcb&v=4)](/arafatkatze)

[![@zcutlip](https://avatars.githubusercontent.com/u/2158303?u=8321838412313bb69339d141b3fe284c4f7e38be&v=4&size=80)](https://github.com/zcutlip)

Description
-----------

[![@zcutlip](https://avatars.githubusercontent.com/u/2158303?u=8321838412313bb69339d141b3fe284c4f7e38be&v=4&size=48)](https://github.com/zcutlip)

[zcutlip](https://github.com/zcutlip)

opened [on Aug 22, 2025](https://github.com/cline/cline/issues/5760#issue-3346772044)

Issue body actions

### What happened?

When cline spawns a local MCP server, it sets current working directory to "/". This means if the server code attempts to load `project_dir/.env` it's unable to. The MCP server won't be able to use project-specific environment variables as as API keys, etc.

It should be an option in the mcp settings to execute local MCP servers with CWD being set to the project directory.

### Steps to reproduce

1.  Attempt to load `.env` from server code
2.  `.env` fails to load
3.  Log current working directory, e.g., `os.getcwd()` in Python
4.  See that CWD is `/`

### Relevant API REQUEST output

### Provider/Model

anthropic claude-3.7

### System Information

    ProductName:		macOS
    ProductVersion:		26.0
    BuildVersion:		25A5346a
    

### Cline Version

3.26.2

Activity
--------

[![zcutlip](https://avatars.githubusercontent.com/u/2158303?u=8321838412313bb69339d141b3fe284c4f7e38be&v=4&size=80)](https://github.com/zcutlip)

### zcutlip commented on Aug 22, 2025

[![@zcutlip](https://avatars.githubusercontent.com/u/2158303?u=8321838412313bb69339d141b3fe284c4f7e38be&v=4&size=48)](/zcutlip)

[zcutlip](/zcutlip)

[on Aug 22, 2025](https://github.com/cline/cline/issues/5760#issuecomment-3215742487)

Author

More actions

I should also add this means sensitive information such as private API keys can't be stored and loaded in a secure way.

[![zcutlip](https://avatars.githubusercontent.com/u/2158303?u=8321838412313bb69339d141b3fe284c4f7e38be&v=4&size=80)](https://github.com/zcutlip)

### zcutlip commented on Aug 22, 2025

[![@zcutlip](https://avatars.githubusercontent.com/u/2158303?u=8321838412313bb69339d141b3fe284c4f7e38be&v=4&size=48)](/zcutlip)

[zcutlip](/zcutlip)

[on Aug 22, 2025](https://github.com/cline/cline/issues/5760#issuecomment-3216030232)

Author

More actions

This is related to, but not the same as [#3129](https://github.com/cline/cline/issues/3129)

[![arafatkatze](https://avatars.githubusercontent.com/u/11155207?u=cd4d7ee51cdd943f2bc1445788062f25a8dd3dcb&v=4&size=80)](https://github.com/arafatkatze)

### arafatkatze commented on Aug 22, 2025

[![@arafatkatze](https://avatars.githubusercontent.com/u/11155207?u=cd4d7ee51cdd943f2bc1445788062f25a8dd3dcb&v=4&size=48)](/arafatkatze)

[arafatkatze](/arafatkatze)

[on Aug 22, 2025](https://github.com/cline/cline/issues/5760#issuecomment-3216159913)

Contributor

More actions

This is related to multi workspace root project so we will cover this soon

[![arafatkatze](https://avatars.githubusercontent.com/u/11155207?u=cd4d7ee51cdd943f2bc1445788062f25a8dd3dcb&v=4&size=80)](https://github.com/arafatkatze)

### arafatkatze commented on Aug 22, 2025

[![@arafatkatze](https://avatars.githubusercontent.com/u/11155207?u=cd4d7ee51cdd943f2bc1445788062f25a8dd3dcb&v=4&size=48)](/arafatkatze)

[arafatkatze](/arafatkatze)

[on Aug 22, 2025](https://github.com/cline/cline/issues/5760#issuecomment-3216163152)

Contributor

More actions

[https://linear.app/cline-bot/issue/ENG-679/solve-mcp-server-path-issues](https://linear.app/cline-bot/issue/ENG-679/solve-mcp-server-path-issues)

[![](https://avatars.githubusercontent.com/u/11155207?s=64&u=cd4d7ee51cdd943f2bc1445788062f25a8dd3dcb&v=4)arafatkatze](/arafatkatze)

self-assigned this

[on Aug 22, 2025](https://github.com/cline/cline/issues/5760#event-19298265598)

[![](https://avatars.githubusercontent.com/u/184127137?s=64&v=4)cline](/cline)

locked and limited conversation to collaborators [on Aug 25, 2025](https://github.com/cline/cline/issues/5760#event-19334320622)

[![](https://avatars.githubusercontent.com/u/1077050?s=64&u=6e63d955a89098e236a30ea67aab8e2277a40a81&v=4)dcbartlett](/dcbartlett)

converted this issue into a discussion [#5820](https://github.com/cline/cline/discussions/5820) [on Aug 25, 2025](https://github.com/cline/cline/issues/5760#event-19334320651)

[Sign up for free](/signup?return_to=https://github.com/cline/cline/issues/5760) **to join this conversation on GitHub.** Already have an account? [Sign in to comment](/login?return_to=https://github.com/cline/cline/issues/5760)

Metadata
--------

Metadata
--------

### Assignees

*   [![@arafatkatze](https://avatars.githubusercontent.com/u/11155207?s=64&u=cd4d7ee51cdd943f2bc1445788062f25a8dd3dcb&v=4)
    
    arafatkatze
    
    ](/arafatkatze)

### Labels

No labels

No labels

### Type

No type

### Projects

No projects

### Milestone

No milestone

### Relationships

None yet

### Development

Code with agent mode

Select code repository

No branches or pull requests

### Participants

[![@zcutlip](https://avatars.githubusercontent.com/u/2158303?s=64&u=8321838412313bb69339d141b3fe284c4f7e38be&v=4)](/zcutlip)[![@arafatkatze](https://avatars.githubusercontent.com/u/11155207?s=64&u=cd4d7ee51cdd943f2bc1445788062f25a8dd3dcb&v=4)](/arafatkatze)

Issue actions
-------------

You can’t perform that action at this time.

Local MCP servers unable to load project-specific .env files · Issue #5760 · cline/cline
<environment_details>
# Cursor Visible Files
../../../../Library/Application Support/Cursor/User/globalStorage/saoudrizwan.claude-dev/settings/cline_mcp_settings.json

# Cursor Open Tabs
../../../../Library/Application Support/Cursor/User/globalStorage/saoudrizwan.claude-dev/settings/cline_mcp_settings.json

# Current Time
10/10/2025, 10:08:06 PM (America/Los_Angeles, UTC-7:00)

# Context Window Usage
67,798 / 200K tokens used (34%)

# Current Mode
ACT MODE
</environment_details>

---

**Assistant:**

[Unexpected content type]

<attempt_completion>
<result>
Your instinct was correct - **this IS a commonly reported issue** for Cline and MCP servers!

## Research Findings:

### 1. **Open PR to Fix It (Since April 2025)**
- **PR #2991**: "Fix: Expand ${workspaceFolder} for MCP stdio transport cwd/env"
- Opened April 19, 2025 - **still not merged** (6+ months old)
- Would add support for `${workspaceFolder}` variable in MCP configs
- Has community interest (users asking when it will merge)
- Awaiting review from 8 maintainers

### 2. **Related Issue (August 2025)**
- **Issue #5760**: "Local MCP servers unable to load project-specific .env files"
- Problem: Cline spawns MCP servers with CWD set to **"/"** (root directory)
- Result: Can't load project-specific `.env` files or API keys
- Security concern: No secure way to store sensitive credentials
- Assigned to internal tracking: ENG-679 in their Linear project
- Converted to discussion #5820

### 3. **Why It's Not Affecting More Users:**

You asked why this doesn't cause more issues - actually **it does**, but:
- Most users use **global** or **remote** MCP servers (don't need workspace paths)
- Agent OS's per-project architecture is relatively unique
- Many users work around it by hardcoding paths
- Some users just don't use project-specific MCP servers

### 4. **Current Status:**

The Cline team **knows about this** and it's tracked internally, but:
- PR has been open since April (not merged)
- Multiple users affected
- No clear timeline for merge

## Recommendations:

**For Agent OS + Cline:**
1. Document this limitation prominently
2. Recommend Cursor over Cline for Agent OS
3. Consider workaround: wrapper script that detects workspace
4. OR wait for PR #2991 to merge (no timeline though)

**This validates your concern** - it's a real architectural issue that affects project-specific MCP servers in Cline.
</result>
<task_progress>
- [x] Found PR #2991 (open since April 2025)
- [x] Found Issue #5760 (project-specific .env problem)
- [x] Confirmed this is a known, tracked issue
- [x] Explained why more users haven't complained
- [x] Provided comprehensive findings and recommendations
</task_progress>
</attempt_completion>

---

**User:**

[attempt_completion] Result:
The user has provided feedback on the results. Consider their input to continue the task, and then attempt completion again.
<feedback>
why is the agent os enhanced architecture relatively unique?
</feedback>
<environment_details>
# Cursor Visible Files
../../../../Library/Application Support/Cursor/User/globalStorage/saoudrizwan.claude-dev/settings/cline_mcp_settings.json

# Cursor Open Tabs
../../../../Library/Application Support/Cursor/User/globalStorage/saoudrizwan.claude-dev/settings/cline_mcp_settings.json

# Current Time
10/10/2025, 10:09:05 PM (America/Los_Angeles, UTC-7:00)

# Context Window Usage
71,255 / 200K tokens used (36%)

# Current Mode
ACT MODE
</environment_details>

---

**Assistant:**

[Unexpected content type]

<attempt_completion>
<result>
Agent OS Enhanced's architecture is unique because it combines several characteristics that are **rarely seen together** in MCP servers:

## What Makes Agent OS Unique:

### 1. **Per-Project Installation + Project-Specific Context**
```
project-a/.praxis-os/
  ├── standards/          ← Project A's coding standards
  ├── workflows/          ← Project A's workflows
  └── mcp_server/         ← MCP server serving Project A's context

project-b/.praxis-os/
  ├── standards/          ← DIFFERENT standards for Project B
  ├── workflows/          ← DIFFERENT workflows
  └── mcp_server/         ← Different context!
```

**Most MCP servers provide the same functionality everywhere:**
- Filesystem tools work the same in any project
- Weather API returns weather regardless of project
- GitHub integration connects to GitHub, not project-specific

### 2. **Local STDIO + Context Awareness**

Agent OS uses:
- **STDIO transport** (runs locally as subprocess)
- **RAG over project content** (searches *this* project's standards)
- **Workflow engine** (executes *this* project's workflows)

Most local MCP servers are **context-free**:
- File reader: reads files, doesn't need project context
- Database client: connects to DB, same everywhere
- Calculator: calculates, project-independent

### 3. **Portable Framework, Not Global Install**

Agent OS is designed to:
- Be copied into any project's `.praxis-os/` directory
- Bring project-specific standards/workflows with it
- Work differently in each project

This is like having a **project-specific AI assistant** that knows your project's conventions.

## Why This Creates Problems:

**Global MCP Config:**
```json
{
  "weather-api": "https://api.weather.com",  // ✅ Same for all projects
  "filesystem": "/usr/local/bin/fs-tool",    // ✅ Global tool
  "agent-os": "/path/to/project-a/.praxis-os" // ❌ Project-specific path!
}
```

**The mismatch:**
- Cline: "I have ONE global config for MCP servers"
- Agent OS: "I need DIFFERENT servers for each project"

## Most MCP Servers Don't Have This Issue:

1. **Remote services** (SSE transport) - accessed by URL, same everywhere
2. **Global tools** (global STDIO) - one installation, serves all projects
3. **Context-free tools** - don't need to know about project structure

Agent OS is rare because it's:
- **Project-aware** (knows project standards/workflows)
- **Locally installed** (per-project, not global)
- **Context-dependent** (different behavior per project)

This combination is powerful but conflicts with global MCP configuration systems.
</result>
<task_progress>
- [x] Explained per-project installation model
- [x] Contrasted with typical MCP servers
- [x] Showed why project-specific context matters
- [x] Explained the architectural conflict
- [x] Demonstrated Agent OS's unique position
</task_progress>
</attempt_completion>

---

**User:**

[attempt_completion] Result:
The user has provided feedback on the results. Consider their input to continue the task, and then attempt completion again.
<feedback>
interesting, as the cline agent, what is your take on agent os enhanced, you can read the docs/ in the project for more detail
</feedback>
<environment_details>
# Cursor Visible Files
../../../../Library/Application Support/Cursor/User/globalStorage/saoudrizwan.claude-dev/settings/cline_mcp_settings.json

# Cursor Open Tabs
../../../../Library/Application Support/Cursor/User/globalStorage/saoudrizwan.claude-dev/settings/cline_mcp_settings.json

# Current Time
10/10/2025, 10:10:52 PM (America/Los_Angeles, UTC-7:00)

# Context Window Usage
72,376 / 200K tokens used (36%)

# Current Mode
ACT MODE
</environment_details>

---

**Assistant:**

[Unexpected content type]

Let me read through the Agent OS Enhanced documentation to give you an informed perspective:

<read_file>
<path>docs/content/intro.md</path>
<task_progress>
- [ ] Read Agent OS documentation
- [ ] Understand the system's goals and design
- [ ] Form perspective as Cline agent
- [ ] Provide thoughtful analysis
</task_progress>
</read_file>

[Response interrupted by a tool use result. Only one tool may be used at a time and should be placed at the end of the message.]

---

**User:**

[read_file for 'docs/content/intro.md'] Result:
---
sidebar_position: 1
---

# Introduction

**Agent OS Enhanced** is a portable multi-agent development framework that transforms AI from helpful assistant to velocity-enhancing development partner.

## What is Agent OS Enhanced?

Agent OS Enhanced builds on the foundation of [Agent OS by Brian Casel](https://buildermethods.com/agent-os), addressing key limitations discovered through production use:

- **90% context reduction** through semantic search (MCP/RAG)
- **Architectural phase gating** that enforces workflows in code
- **Universal + generated standards** that work across any language
- **Specialized sub-agents** for design validation, concurrency analysis, and more

## Quick Start

Install Agent OS Enhanced in your project:

```bash
# Open your project in Cursor and say:
"Install Agent OS from github.com/honeyhiveai/agent-os-enhanced"
```

The Cursor agent will:
1. Analyze your project (detect language, frameworks)
2. Copy universal standards (CS fundamentals)
3. Generate language-specific standards (tailored to your stack)
4. Install MCP server locally
5. Configure Cursor MCP integration
6. Build RAG index

## What Gets Installed

```
your-project/
├── .cursorrules              # AI behavioral triggers (27 lines)
├── .praxis-os/
│   ├── standards/
│   │   ├── universal/        # Timeless CS fundamentals
│   │   └── development/      # Language-specific guidance
│   ├── mcp_server/           # MCP/RAG server
│   └── .cache/vector_index/  # Semantic search index
└── .cursor/
    └── mcp.json              # MCP configuration
```

## Core Concepts

### MCP/RAG Architecture

Instead of reading entire 50KB files, the MCP server uses semantic search to deliver 2-5KB targeted chunks:

- **Before:** AI reads full file, 4% relevant content, 12,500 tokens
- **After:** Vector search returns relevant chunks, 95% relevant, 625 tokens
- **Result:** 24x better relevance, 95% reduction in token usage

### Universal Standards

Timeless CS fundamentals that apply to any programming language:

- Concurrency patterns (race conditions, deadlocks, locking strategies)
- Testing strategies (test pyramid, test doubles, property-based testing)
- Architecture patterns (SOLID, dependency injection, API design)
- Failure modes (graceful degradation, circuit breakers, retry strategies)

### Language-Specific Generation

For each project, Agent OS generates language-specific implementations of universal standards:

- **Python:** GIL, threading, asyncio, pytest patterns
- **Go:** Goroutines, channels, sync primitives, table-driven tests
- **Rust:** Ownership, Arc/Mutex, tokio, cargo test patterns
- **And more...**

### Architectural Phase Gating

Workflows enforce progression through code, not documentation:

```python
def can_access_phase(self, phase: int) -> bool:
    """AI cannot access Phase N+1 before completing Phase N."""
    if phase == self.current_phase or phase in self.completed_phases:
        return True
    return False  # Structurally impossible to skip
```

## Next Steps

- **[How It Works](./how-it-works)** - **Start here** - Complete human-AI collaboration pattern
- **[Installation](./installation)** - Set up in your project
- **[Architecture](./architecture)** - MCP/RAG system deep-dive
- **[Standards](./standards)** - Universal CS fundamentals
- **[Workflows](./workflows)** - Phase-gated workflows

<environment_details>
# Cursor Visible Files
../../../../Library/Application Support/Cursor/User/globalStorage/saoudrizwan.claude-dev/settings/cline_mcp_settings.json

# Cursor Open Tabs
../../../../Library/Application Support/Cursor/User/globalStorage/saoudrizwan.claude-dev/settings/cline_mcp_settings.json

# Current Time
10/10/2025, 10:10:59 PM (America/Los_Angeles, UTC-7:00)

# Context Window Usage
72,450 / 200K tokens used (36%)

# Current Mode
ACT MODE
</environment_details>

---

**Assistant:**

[Unexpected content type]

<read_file>
<path>docs/content/how-it-works.md</path>
<task_progress>
- [x] Read intro documentation
- [ ] Read how-it-works for deeper understanding
- [ ] Review architecture documentation
- [ ] Form comprehensive perspective
</task_progress>
</read_file>

[Response interrupted by a tool use result. Only one tool may be used at a time and should be placed at the end of the message.]

---

**User:**

[read_file for 'docs/content/how-it-works.md'] Result:
---
sidebar_position: 2
---

# How It Works

Agent OS Enhanced changes how you work with AI - from prompting to orchestration. Here's the complete workflow pattern.

## The Human-AI Partnership Model

### Your Role: Orchestrator
- Design direction and decisions
- Review and approval
- Team coordination
- Quality validation

### AI's Role: Implementation Engine
- 100% code authorship
- Design documentation
- Test creation
- Artifact generation

**Key principle:** You guide through conversation, AI invokes tools automatically.

## Complete Workflow Pattern

### Phase 1: Design Discussion

**You initiate** (conversational):
```
"We need user authentication with JWT tokens"
```

**AI responds** (conversational):
```
Let me understand the requirements:
- Will this be for web, mobile, or both?
- Do you need social auth (Google, GitHub)?
- What's your session duration requirement?
- Any specific compliance needs (GDPR, HIPAA)?
```

**Back and forth discussion:**
- You clarify requirements
- AI asks questions
- You make decisions
- AI proposes approaches

**AI creates design doc:**
```
I'll document this design:
- Authentication architecture
- Token structure (access + refresh)
- Security considerations
- Database schema
- API endpoints
```

AI writes `design-doc.md` with your approved approach.

### Phase 2: Spec Creation (Tool Chain Activation)

**You trigger** (conversational):
```
"This design looks good. Create the full spec for implementation."
```

**AI invokes MCP tool automatically:**
```python
# AI makes this tool call (you don't see this)
start_workflow(
    workflow_type="spec_creation_v1",
    target_file="user_authentication"
)
```

**What happens:**
1. AI starts `spec_creation_v1` workflow
2. Executes Phase 0: Context gathering
3. Provides checkpoint evidence
4. Advances to Phase 1: Requirements
5. Executes Phase 1: SRD creation
6. Continues through all phases systematically

**Result:** Complete specification in `.praxis-os/specs/2025-10-08-user-auth/`
- `README.md` - Executive summary
- `srd.md` - Business requirements
- `specs.md` - Technical design
- `tasks.md` - Implementation breakdown
- `implementation.md` - Detailed guidance

### Phase 3: Review & Refinement

**You review:**
```
"The spec looks good, but add rate limiting to the token endpoint
and use refresh token rotation for better security."
```

**AI updates:**
- Modifies `specs.md` with rate limiting design
- Adds refresh token rotation
- Updates security considerations
- Adjusts implementation tasks

**Iterate until approved.**

### Phase 4: Commit & Team Review

**You orchestrate:**
```
"Commit this spec for team review"
```

**AI executes:**
```bash
git add .praxis-os/specs/2025-10-08-user-auth/
git commit -m "spec: user authentication with JWT"
git push
```

**Team reviews spec** in PR, provides feedback.

**If changes needed:**
```
"Update the spec: use Redis for session storage instead of PostgreSQL"
```

AI modifies spec, you commit updates.

**Once approved:**
```
"Spec approved, ready for implementation"
```

### Phase 5: Implementation (Tool Chain Activation)

**You trigger** (conversational):
```
"Implement the user authentication spec"
```

**AI invokes MCP tool automatically:**
```python
# AI makes this tool call (you don't see this)
start_workflow(
    workflow_type="spec_execution_v1",
    target_file="user_authentication"
)
```

**What happens:**
1. AI starts `spec_execution_v1` workflow
2. Phase 0: Reviews the spec
3. Phase 1: Creates structure, installs dependencies
4. Phase 2: Implements features (100% AI-authored code)
5. Phase 3: Writes comprehensive tests
6. Phase 4: Creates documentation
7. Phase 5: Quality validation

**Throughout implementation:**
- You review progress
- AI provides updates
- You catch issues: "This has a race condition"
- AI fixes immediately
- AI commits work systematically

### Phase 6: Review & Ship

**You validate:**
```
"Show me the authentication flow"
```

AI explains implementation, you test locally.

**If issues found:**
```
"The token refresh logic doesn't handle expired refresh tokens"
```

AI fixes, writes test, commits.

**When satisfied:**
```
"This is ready. Create PR for team review."
```

AI creates PR with:
- Implementation code
- Comprehensive tests
- Documentation
- Specification reference

## Tool Calls: The Hidden Mechanism

### You Never Call Tools Directly

❌ **Not this:**
```
"Use the mcp_agent-os-rag_start_workflow tool with spec_creation_v1"
```

✅ **This:**
```
"Create a spec for user authentication"
```

The AI automatically invokes the right tool.

### Available Tool Chains

#### 1. RAG Search (Automatic)

**When you ask:**
```
"How do I handle race conditions in async code?"
```

**AI invokes:**
```python
search_standards(
    query="race conditions async code",
    n_results=3
)
```

**You see:** AI's answer with context from standards.

#### 2. Spec Creation Workflow

**When you say:**
```
"Create a spec for [feature]"
```

**AI invokes:**
```python
start_workflow(
    workflow_type="spec_creation_v1",
    target_file="feature_name"
)
```

**You see:** AI systematically creates specification.

#### 3. Spec Execution Workflow

**When you say:**
```
"Implement the [feature] spec"
```

**AI invokes:**
```python
start_workflow(
    workflow_type="spec_execution_v1",
    target_file="feature_name"
)
```

**You see:** AI builds feature with tests and docs.

#### 4. Custom Workflow Creation

**When you say:**
```
"I need a workflow for API documentation generation"
```

**AI invokes:**
```python
create_workflow(
    name="api_documentation_v1",
    workflow_type="documentation",
    phases=["Analysis", "Generation", "Review"]
)
```

**You see:** Complete workflow structure created.

## Conversation Patterns

### Starting Work

**Good:**
```
"We need user authentication"
"Let's add caching to the API"
"Create a workflow for database migrations"
```

**Not:**
```
"Call start_workflow with spec_creation_v1"
"Use the RAG tool to search"
```

### Making Corrections

